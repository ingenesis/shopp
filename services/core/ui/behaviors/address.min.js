/*!
 * address.js - Description
 * Copyright Â© 2012 by Ingenesis Limited. All rights reserved.
 * Licensed under the GPLv3 {@see license.txt}
 */
(function(b){jQuery.fn.upstate=function(){if("undefined"!==typeof regions)return b(this).change(function(g,e){var a=b(this),h=a.attr("id").split("-")[0],d=a.val(),c=a.parents().find("#"+h+"-state"),a=a.parents().find("#"+h+"-state-menu"),f='<option value=""></option>';if(0==a.length)return!0;a.hasClass("hidden")&&a.removeClass("hidden").hide();regions[d]||e&&1<a.find("option").length?(c.setDisabled(!0).addClass("_important").hide(),regions[d]?(b.each(regions[d],function(b,a){f+='<option value="'+
b+'">'+a+"</option>"}),e||a.empty().append(f).setDisabled(!1).show().focus(),a.hasClass("auto-required")&&a.addClass("required")):a.hasClass("auto-required")&&a.removeClass("required"),a.setDisabled(!1).show(),b("label[for="+c.attr("id")+"]").attr("for",a.attr("id"))):(a.empty().setDisabled(!0).hide(),c.setDisabled(!1).show().removeClass("_important"),b("label[for="+a.attr("id")+"]").attr("for",c.attr("id")),e||c.val("").focus())}).trigger("change",[!0]),b(this)}})(jQuery);
jQuery(document).ready(function(b){var g=b(".sameaddress"),e=b("#shipping-address-fields"),a=b("#billing-address-fields");b("#firstname,#lastname").change(function(){var a="firstname"==b(this).attr("id")?"lastname":"firstname";b("#"+a).val().trim()&&b(this).val().trim()&&b("#billing-name,#shipping-name").filter(function(){return""===this.value}).val((new String(b("#firstname").val()+" "+b("#lastname").val())).trim())});b("#billing-country,#shipping-country").upstate();g.change(function(h,d){var c=
!1,f=b("#billing-country"),l=b("#shipping-country"),m="billing"==g.val()?e:a,k="shipping"==g.val()?e:a;g.is(":checked")?(m.removeClass("half"),k.hide().find(".required").setDisabled(!0)):(m.addClass("half"),k.show().find(".disabled:not(._important)").setDisabled(!1),d||(c=!0));f.is(":visible")&&f.trigger("change.localemenu",[d]);l.is(":visible")&&l.trigger("change.localemenu",[d]);c&&k.find("input:first").focus()}).trigger("change",[!0]).click(function(){b(this).change()})});