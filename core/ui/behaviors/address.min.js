/*!
 * address.js - Description
 * Copyright Â© 2012 by Ingenesis Limited. All rights reserved.
 * Licensed under the GPLv3 {@see license.txt}
 */
 (function(a){jQuery.fn.upstate=function(){if("undefined"===typeof regions)return a(this);a(this).change(function(k,g){var f=a(this),c=f.attr("id").split("-")[0],e=f.val(),d=f.parents().find("#"+c+"-state"),b=f.parents().find("#"+c+"-state-menu"),f=d.val(),h='<option value=""></option>',c="";if(0==b.length)return!0;b.hasClass("hidden")&&b.removeClass("hidden").hide();regions[e]||g&&1<b.find("option").length?(d.setDisabled(!0).addClass("_important").hide(),regions[e]?(b.hasClass("selectized")?(c=b[0].selectize.getValue(),
 b[0].selectize.clearOptions(),a.each(regions[e],function(a,c){b[0].selectize.addOption({value:a,text:c})}),c||(c=f),b[0].selectize.setValue(c)):(a.each(regions[e],function(a,b){h+='<option value="'+a+'">'+b+"</option>"}),g||b.empty().append(h).setDisabled(!1).show().focus()),b.hasClass("auto-required")&&b.addClass("required")):b.hasClass("auto-required")&&b.removeClass("required"),b.hasClass("selectized")?b[0].selectize.enable():(b.setDisabled(!1).show(),a("label[for="+d.attr("id")+"]").attr("for",
 b.attr("id")))):(b.hasClass("selectized")?(b[0].selectize.clearOptions(),b[0].selectize.addOption({value:d.val(),text:d.val()}),b[0].selectize.setValue(d.val())):(b.empty().setDisabled(!0).hide(),d.setDisabled(!1).show().removeClass("_important")),a("label[for="+b.attr("id")+"]").attr("for",d.attr("id")),g||d.val("").focus())}).trigger("change",[!0]);return a(this)}})(jQuery);
 jQuery(document).ready(function(a){var k=a(".sameaddress"),g=a("#shipping-address-fields"),f=a("#billing-address-fields");a("#firstname,#lastname").change(function(){var c="firstname"==a(this).attr("id")?"lastname":"firstname";a("#"+c).val().trim()&&a(this).val().trim()&&a("#billing-name,#shipping-name").filter(function(){return""===this.value}).val((new String(a("#firstname").val()+" "+a("#lastname").val())).trim())});a("#billing-country,#shipping-country").upstate();k.change(function(c,e){var d=
 !1,b=a("#billing-country"),h=a("#shipping-country"),m="billing"==k.val()?g:f,l="shipping"==k.val()?g:f;k.is(":checked")?(m.removeClass("half"),l.hide().find(".required").setDisabled(!0)):(m.addClass("half"),l.show().find(".disabled:not(._important)").setDisabled(!1),e||(d=!0));b.is(":visible")&&b.trigger("change.localemenu",[e]);h.is(":visible")&&h.trigger("change.localemenu",[e]);d&&l.find("input:first").focus()}).trigger("change",[!0]).click(function(){a(this).change()});a("#billing-country,#shipping-country").change(function(){if("undefined"!==
 typeof $shopp_address){var c=a(this).attr("id").split("-")[0],e=a(this).val();-1<$shopp_address.country_no_postal_codes.indexOf(e)?a("#"+c+"-postcode").removeClass("required"):a("#"+c+"-postcode").addClass("required")}})});
